<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    <title>MAF Output</title>
</head>
<body>
    
<h1>RUNNAME: {{ runName  }}</h1>

<a href='#configSummary'>Config Summary and Details</a> <br>
<a href='#summaryStats'>Summary Statistics Table </a>

<hr><hr>

<!-- The regular metrics -->
  {% for b in blocks %}
  {{ b.NameInfo }}
  <table id="all plots">
    <tr>
      {% for filename in b.plots %}
      <td align='center'><a href='{{ outDir }}/{{ filename[0] }}'><img width='80%' 
               src='{{ outDir }}/{{ filename[1] }}'> </a></td>
        {% if loop.index is divisibleby 3 %}
            </tr><tr>
        {% endif %}
      {% endfor %}
    </tr>
  </table>
<table>
  {% for stat in b.stats %}
  <tr>
    <td> {{ stat[0] }} </td> <td> {{ stat[1] }} </td>
  </tr>
  {% endfor %}
</table>
<hr>
{% endfor %}


<!-- The completeness metrics -->
  {% for b in completenessBlocks %}
  {{ b.NameInfo }}
  <table id="Completeness plots">
    <tr>
      {% for filename in b.plots %}
      <td align='center'><a href='{{ outDir }}/{{ filename }}'><img width='80%' 
               src='{{ outDir }}/thumb.{{ filename }}'> </a></td>
        {% if loop.index is divisibleby 3 %}
            </tr><tr>
        {% endif %}
      {% endfor %}
    </tr>
  </table>
<table>
  {% for stat in b.stats %}
  <tr>
    <td> {{ stat[0] }} </td> <td> {{ stat[1] }} </td>
  </tr>
  {% endfor %}
</table>
<hr>
{% endfor %}

<!-- Group all the summary stats together -->


<h2> Completness Tables</h2><br>
<i>(assumes all Completeness Tables run with the same number of bins)</i>
<table border=2>
  <tr align="center">
    {% for stat in completeStats %}
      {% if loop.index == 1 %}
      <td width="100"> </td>
      {% for key,value in stat.stats.iteritems() %}
         <td width="100"> {{ key }} </td>
      {% endfor %}
          </tr>
      {% endif %}
      <td>{{ stat.NameInfo  }} </td>
      {% for key,value in stat.stats.iteritems() %}
          <td> {{ value }} </td>
      {% endfor %}
      </tr>
    {% endfor %}
</table>



<hr>

<h2> Unislicer Stats</h2>
<table>
    {% for stat in identStats %}
    {% if loop.index == 1 %}
     <tr>
     <td> <b>Name</b> </td> <td> <b>Ident</b> </td> 
     </tr>
    {% endif %}
  <tr>
    <td> {{ stat.NameInfo }}</td>
    <td> {{ stat.stats.Identity }} </td>
</tr>
  {% endfor %}
</table>

<hr>

<h2> Basic Stats</h2>
<table>
    {% for stat in basicStats %}
    {% if loop.index == 1 %}
    <tr>
     <td> <b>Name</b> </td> <td><b>Median</b>  </td>    <td> <b>Mean</b> </td> <td> <b>RMS</b> </td> <td> <b>+3&sigma;</b> </td>  <td> <b>-3&sigma;</b> </td>  <td> <b>Count</b> </td>  
    </tr>
    {% endif %}
  <tr>
    <td> {{ stat.NameInfo }} </td>
    <td> {{ stat.stats.Median }} </td><td> {{ stat.stats.Mean }} </td><td> {{ stat.stats.Rms }} </td> 
    <td> {{ stat.stats.p3Sigma }} </td> <td> {{ stat.stats.m3Sigma }} </td> <td> {{ stat.stats.Count }} </td>
</tr>
  {% endfor %}
</table>

<hr>

<h2> Remaining Stats</h2>

<table>
  <tr>
    {% for stat in etcStats %}
  <tr>
    <td> {{ stat.NameInfo }} </td>
    {% for key, value in stat.stats.iteritems() %}
    <td> <b>{{ key }}</b> <br> {{ value }} </td>
    {% endfor %}
</tr>
  {% endfor %}
</table>

<hr>


 <!-- The configuration files -->
<h2>Configuration Files</h2>
<a name="configSummary"></a>
<object width="400" height="300" type="text/plain" data="{{ outDir }}/configSummary.txt" border="0" >
</object>

<object width="400" height="300" type="text/plain" data="{{ outDir }}/configDetails.txt" border="0" >
</object>





</body>
</html>
