(function(){
    var app = angular.module('showMaf', ['smart-table']);
    app.config(function ($interpolateProvider) {
        $interpolateProvider.startSymbol('{$');
        $interpolateProvider.endSymbol('$}');
    });
    app.factory('Run', [function runFactory(){
        var Run = function(){
            this.runId = undefined;
        };
        angular.extend(Run.prototype, {
            load: function(runId){
                this.runId = runId;
            }
        });
        return new Run();
    }]);
    app.controller('RunListController', ['$scope', '$http', 'Run', function($scope, $http, Run){
        //$scope.runs = [{'opsimComment': '10 yr, 10 cheeses w/undercheese', 'mafComment': 'maf_cadence_ops1_1122', 'opsimDate': '05/18/14', 'mafDir': 'maf_cadence/maf_cadence_ops1_1122', 'mafDate': '11/11/14', 'mafRunId': 1, 'opsimRun': 'ops1_1122'}, {'opsimComment': 'tentative baseline min Alt=20', 'mafComment': 'maf_cadence_ops1_1140', 'opsimDate': '07/29/14', 'mafDir': 'maf_cadence/maf_cadence_ops1_1140', 'mafDate': '11/10/14', 'mafRunId': 2, 'opsimRun': 'ops1_1140'}, {'opsimComment': 'tier 1 #5 min Alt=20', 'mafComment': 'maf_cadence_ops1_1141', 'opsimDate': '07/29/14', 'mafDir': 'maf_cadence/maf_cadence_ops1_1141', 'mafDate': '11/10/14', 'mafRunId': 3, 'opsimRun': 'ops1_1141'}, {'opsimComment': 'tier 1 #9 min Alt=20', 'mafComment': 'maf_cadence_ops1_1144', 'opsimDate': '07/29/14', 'mafDir': 'maf_cadence/maf_cadence_ops1_1144', 'mafDate': '11/11/14', 'mafRunId': 4, 'opsimRun': 'ops1_1144'}, {'opsimComment': 'tier 1 #10 min Alt=20', 'mafComment': 'maf_cadence_ops1_1146', 'opsimDate': '07/29/14', 'mafDir': 'maf_cadence/maf_cadence_ops1_1146', 'mafDate': '11/11/14', 'mafRunId': 5, 'opsimRun': 'ops1_1146'}, {'opsimComment': 'tier 1 #6 min Alt=20', 'mafComment': 'maf_cadence_ops1_1147', 'opsimDate': '07/29/14', 'mafDir': 'maf_cadence/maf_cadence_ops1_1147', 'mafDate': '11/10/14', 'mafRunId': 6, 'opsimRun': 'ops1_1147'}];
        $scope.runList = [];
        $scope.runs = [];
        $scope.mode = "fullList";
        //$scope.mode = "showRun";
        $scope.isFullList = function(){
            return $scope.mode == "fullList";
        };
        $scope.listClass = function(){
            return $scope.isFullList() ? "col-md-9 small" : "col-md-3 small";
        };
        $scope.detailsClass = function(){
            return $scope.isFullList() ? "col-md-3" : "col-md-9";
        };
        $http.get('/runList')
            .success(function(data){
                $scope.runList.push.apply($scope.runList, data);
                $scope.runs = [].concat($scope.runList);
                $("#loading").hide();
            });

        $scope.switch_run = function(runId){
            Run.load(runId);
            $scope.mode = "showRun";
        };
        $scope.back_to_list = function(){
            $scope.mode = "fullList";
        };
        
    }]);
    app.controller('RunController', ['$scope', '$http', 'Run', function($scope, $http, Run){
        //$scope.metrics = [{'groupName': 'Cadence', 'members': [{'groupName': 'Calibration', 'members': [{"MetricName": "Parallax 24mag", "Slicer": "HealpixSlicer", "Metadata": " ", "Data": ["ops1_1122_Parallax_24mag__HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Parallax_24mag__HEAL.npz"]}, {"MetricName": "Parallax 24mag", "Slicer": "HealpixSlicer", "Metadata": "night < 365 ", "Data": ["ops1_1122_Parallax_24mag_night_lt_365_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Parallax_24mag_night_lt_365_HEAL.npz"]}, {"MetricName": "Parallax 24mag Normed", "Slicer": "HealpixSlicer", "Metadata": " ", "Data": ["ops1_1122_Parallax_24mag_Normed__HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Parallax_24mag_Normed__HEAL.npz"]}, {"MetricName": "Parallax 24mag Normed", "Slicer": "HealpixSlicer", "Metadata": "night < 365 ", "Data": ["ops1_1122_Parallax_24mag_Normed_night_lt_365_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Parallax_24mag_Normed_night_lt_365_HEAL.npz"]}, {"MetricName": "Parallax Normed", "Slicer": "HealpixSlicer", "Metadata": " ", "Data": ["ops1_1122_Parallax_Normed__HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Parallax_Normed__HEAL.npz"]}, {"MetricName": "Parallax Normed", "Slicer": "HealpixSlicer", "Metadata": "night < 365 ", "Data": ["ops1_1122_Parallax_Normed_night_lt_365_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Parallax_Normed_night_lt_365_HEAL.npz"]}, {"MetricName": "Proper Motion 24mag", "Slicer": "HealpixSlicer", "Metadata": " ", "Data": ["ops1_1122_Proper_Motion_24mag__HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Proper_Motion_24mag__HEAL.npz"]}, {"MetricName": "Proper Motion 24mag", "Slicer": "HealpixSlicer", "Metadata": "night < 365 ", "Data": ["ops1_1122_Proper_Motion_24mag_night_lt_365_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Proper_Motion_24mag_night_lt_365_HEAL.npz"]}, {"MetricName": "Proper Motion 24mag Normed", "Slicer": "HealpixSlicer", "Metadata": " ", "Data": ["ops1_1122_Proper_Motion_24mag_Normed__HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Proper_Motion_24mag_Normed__HEAL.npz"]}, {"MetricName": "Proper Motion 24mag Normed", "Slicer": "HealpixSlicer", "Metadata": "night < 365 ", "Data": ["ops1_1122_Proper_Motion_24mag_Normed_night_lt_365_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Proper_Motion_24mag_Normed_night_lt_365_HEAL.npz"]}, {"MetricName": "Proper Motion Normed", "Slicer": "HealpixSlicer", "Metadata": " ", "Data": ["ops1_1122_Proper_Motion_Normed__HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Proper_Motion_Normed__HEAL.npz"]}, {"MetricName": "Proper Motion Normed", "Slicer": "HealpixSlicer", "Metadata": "night < 365 ", "Data": ["ops1_1122_Proper_Motion_Normed_night_lt_365_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Proper_Motion_Normed_night_lt_365_HEAL.npz"]}, {"MetricName": "parallax", "Slicer": "HealpixSlicer", "Metadata": " ", "Data": ["ops1_1122_parallax__HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_parallax__HEAL.npz"]}, {"MetricName": "parallax", "Slicer": "HealpixSlicer", "Metadata": "night < 365 ", "Data": ["ops1_1122_parallax_night_lt_365_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_parallax_night_lt_365_HEAL.npz"]}, {"MetricName": "properMotion", "Slicer": "HealpixSlicer", "Metadata": " ", "Data": ["ops1_1122_properMotion__HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_properMotion__HEAL.npz"]}, {"MetricName": "properMotion", "Slicer": "HealpixSlicer", "Metadata": "night < 365 ", "Data": ["ops1_1122_properMotion_night_lt_365_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_properMotion_night_lt_365_HEAL.npz"]}]}, {'groupName': 'Early Good Seeing', 'members': [{"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": " u and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_u_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_u_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and u and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_365_and_u_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_365_and_u_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and u and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_730_and_u_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_730_and_u_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": " g and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_g_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_g_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and g and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_365_and_g_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_365_and_g_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and g and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_730_and_g_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_730_and_g_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": " r and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_r_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_r_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and r and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_365_and_r_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_365_and_r_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and r and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_730_and_r_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_730_and_r_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": " i and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_i_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_i_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and i and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_365_and_i_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_365_and_i_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and i and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_730_and_i_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_730_and_i_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": " z and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_z_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_z_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and z and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_365_and_z_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_365_and_z_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and z and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_730_and_z_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_730_and_z_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": " y and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_y_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_y_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and y and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_365_and_y_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_365_and_y_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "Binary finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and y and finSeeing < 0.7 ", "Data": ["ops1_1122_Binary_finSeeing_night_lt_730_and_y_and_finSeeing_lt_0_7_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Binary_finSeeing_night_lt_730_and_y_and_finSeeing_lt_0_7_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": " u ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_u_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and u ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_u_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and u ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_u_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": " g ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_g_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and g ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_g_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and g ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_g_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": " r ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_r_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and r ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_r_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and r ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_r_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": " i ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_i_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and i ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_i_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and i ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_i_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": " z ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_z_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and z ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_z_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and z ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_z_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": " y ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_y_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and y ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_365_and_y_HEAL.npz"]}, {"MetricName": "FracBelow 0.70 finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and y ", "Data": ["ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_FracBelow_0_70_finSeeing_night_lt_730_and_y_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": " u ", "Data": ["ops1_1122_Min_finSeeing_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_u_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and u ", "Data": ["ops1_1122_Min_finSeeing_night_lt_365_and_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_365_and_u_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and u ", "Data": ["ops1_1122_Min_finSeeing_night_lt_730_and_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_730_and_u_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": " g ", "Data": ["ops1_1122_Min_finSeeing_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_g_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and g ", "Data": ["ops1_1122_Min_finSeeing_night_lt_365_and_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_365_and_g_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and g ", "Data": ["ops1_1122_Min_finSeeing_night_lt_730_and_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_730_and_g_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": " r ", "Data": ["ops1_1122_Min_finSeeing_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_r_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and r ", "Data": ["ops1_1122_Min_finSeeing_night_lt_365_and_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_365_and_r_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and r ", "Data": ["ops1_1122_Min_finSeeing_night_lt_730_and_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_730_and_r_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": " i ", "Data": ["ops1_1122_Min_finSeeing_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_i_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and i ", "Data": ["ops1_1122_Min_finSeeing_night_lt_365_and_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_365_and_i_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and i ", "Data": ["ops1_1122_Min_finSeeing_night_lt_730_and_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_730_and_i_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": " z ", "Data": ["ops1_1122_Min_finSeeing_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_z_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and z ", "Data": ["ops1_1122_Min_finSeeing_night_lt_365_and_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_365_and_z_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and z ", "Data": ["ops1_1122_Min_finSeeing_night_lt_730_and_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_730_and_z_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": " y ", "Data": ["ops1_1122_Min_finSeeing_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_y_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and y ", "Data": ["ops1_1122_Min_finSeeing_night_lt_365_and_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_365_and_y_HEAL.npz"]}, {"MetricName": "Min finSeeing", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and y ", "Data": ["ops1_1122_Min_finSeeing_night_lt_730_and_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Min_finSeeing_night_lt_730_and_y_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": " u ", "Data": ["ops1_1122_TemplateExistsMetric_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_u_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and u ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_365_and_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_365_and_u_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and u ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_730_and_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_730_and_u_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": " g ", "Data": ["ops1_1122_TemplateExistsMetric_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_g_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and g ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_365_and_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_365_and_g_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and g ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_730_and_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_730_and_g_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": " r ", "Data": ["ops1_1122_TemplateExistsMetric_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_r_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and r ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_365_and_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_365_and_r_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and r ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_730_and_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_730_and_r_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": " i ", "Data": ["ops1_1122_TemplateExistsMetric_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_i_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and i ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_365_and_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_365_and_i_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and i ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_730_and_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_730_and_i_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": " z ", "Data": ["ops1_1122_TemplateExistsMetric_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_z_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and z ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_365_and_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_365_and_z_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and z ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_730_and_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_730_and_z_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": " y ", "Data": ["ops1_1122_TemplateExistsMetric_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_y_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 365 and y ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_365_and_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_365_and_y_HEAL.npz"]}, {"MetricName": "TemplateExistsMetric", "Slicer": "HealpixSlicer", "Metadata": "night < 730 and y ", "Data": ["ops1_1122_TemplateExistsMetric_night_lt_730_and_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_TemplateExistsMetric_night_lt_730_and_y_HEAL.npz"]}]}, {'groupName': 'Uniformity', 'members': [{"MetricName": "Uniformity expMJD", "Slicer": "HealpixSlicer", "Metadata": " ", "Data": ["ops1_1122_Uniformity_expMJD__HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Uniformity_expMJD__HEAL.npz"]}, {"MetricName": "Uniformity expMJD", "Slicer": "HealpixSlicer", "Metadata": " g ", "Data": ["ops1_1122_Uniformity_expMJD_g_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Uniformity_expMJD_g_HEAL.npz"]}, {"MetricName": "Uniformity expMJD", "Slicer": "HealpixSlicer", "Metadata": " i ", "Data": ["ops1_1122_Uniformity_expMJD_i_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Uniformity_expMJD_i_HEAL.npz"]}, {"MetricName": "Uniformity expMJD", "Slicer": "HealpixSlicer", "Metadata": " r ", "Data": ["ops1_1122_Uniformity_expMJD_r_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Uniformity_expMJD_r_HEAL.npz"]}, {"MetricName": "Uniformity expMJD", "Slicer": "HealpixSlicer", "Metadata": " u ", "Data": ["ops1_1122_Uniformity_expMJD_u_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Uniformity_expMJD_u_HEAL.npz"]}, {"MetricName": "Uniformity expMJD", "Slicer": "HealpixSlicer", "Metadata": " y ", "Data": ["ops1_1122_Uniformity_expMJD_y_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Uniformity_expMJD_y_HEAL.npz"]}, {"MetricName": "Uniformity expMJD", "Slicer": "HealpixSlicer", "Metadata": " z ", "Data": ["ops1_1122_Uniformity_expMJD_z_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Uniformity_expMJD_z_HEAL.npz"]}, {"MetricName": "Uniformity expMJD", "Slicer": "HealpixSlicer", "Metadata": "night < 365 ", "Data": ["ops1_1122_Uniformity_expMJD_night_lt_365_HEAL.npz", "maf_cadence/maf_cadence_ops1_1122/ops1_1122_Uniformity_expMJD_night_lt_365_HEAL.npz"]}]}]}];
        $scope.Run = Run;
        $scope.metrics = [];
        $scope.reset_search = function(){
            $scope.search = {'metricName': ''};
        };
        $scope.plot_view = function(flag){
            $scope.show_plots = flag;
        };
        $scope.checkGroup = function(group){
            var newValue = !$scope.updateCheckGroup(group);
            group.members.forEach(function(d){
                $scope.checkSubGroup(d);
            });
        };
        $scope.updateCheckGroup = function(group){
            return group.members.length == group.members.filter(function(d){ return $scope.updateCheckSubGroup(d); }).length;
        };

        $scope.checkSubGroup = function(subGroup){
            var newValue = !$scope.updateCheckSubGroup(subGroup);
            subGroup.members.forEach(function(d){
                d.selected = newValue;
            });
        };
        $scope.updateCheckSubGroup = function(subGroup){
            return subGroup.members.length == subGroup.members.filter(function(d){ return d.selected; }).length;
        };

        $scope.$watch('Run.runId', function() {
            $scope.runId = Run.runId;
            $scope.show_plots = false;
            if ( typeof(Run.runId) !== "undefined" ){
                $("#loading").show();
                $http.get('/run/' + Run.runId)
                    .success(function (data) {
                        $scope.runInfo = data.runInfo
                        $scope.metrics = data.metrics;
                        $("#loading").hide();
                    });
            }
        });
    }]); 
})();